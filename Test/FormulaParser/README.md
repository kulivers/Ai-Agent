# Formula Parser - –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞

## ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!

–ò–∑ XML —Ñ–∞–π–ª–∞ `aaa.xml` —É—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ **180 —Ñ–æ—Ä–º—É–ª**.

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ñ–æ—Ä–º—É–ª**: 180
- **–° –ø—Ä–∏–º–µ—Ä–∞–º–∏**: 177 (98.3%)
- **–° —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–∏–º–µ—Ä–æ–≤**: 156 (86.7%)
- **–†–∞–∑–º–µ—Ä JSON**: 116.16 KB

### üìÅ –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

```
C:\dev\semantic-kernel\dotnet\src\FormulaParser\formulas.json
```

### üìà –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

| –¢–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|----------------|------------|
| –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è | 49 |
| –ß–∏—Å–ª–æ | 44 |
| –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | 41 |
| –°—Ç—Ä–æ–∫–∞ | 15 |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 10 |
| –î—Ä—É–≥–∏–µ —Ç–∏–ø—ã | 21 |

### üéØ –ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º—É–ª

#### –°—Ç—Ä–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `CONCAT ( list )` - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
- `FORMAT ( "stringToFormat {0} {1} ... {N}" , LIST ( argument0 , argument1 , ..., valueN ))` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `JOIN ( separator , stringList )` - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º

#### –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- `CREATEDATE ( year , month , day )` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—Ç—ã
- `ADDDAYS ( dateTime , numberOfDays )` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–Ω–µ–π
- `DAYOFWEEK ( dateTime )` - –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏

#### –õ–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `BOOL ( string )` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ boolean
- `EQUALS ( argument1 , argument2 )` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- `BETWEEN ( value , min , max )` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

#### –ß–∏—Å–ª–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `DECIMAL ( string )` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —á–∏—Å–ª–æ
- `ROUND ( number , digits )` - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ
- `SUM ( list )` - —Å—É–º–º–∞ —Å–ø–∏—Å–∫–∞

### üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON

–ö–∞–∂–¥–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:

```json
{
  "Name": "BOOL",
  "Description": "–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ True –∏–ª–∏ False.",
  "Syntax": "BOOL ( string )",
  "Arguments": "string ‚Äî —Å—Ç—Ä–æ–∫–∞ True –∏–ª–∏ False (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)...",
  "Result": "–õ–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ",
  "Example": "BOOL ( 'TRUE' )",
  "ExampleResult": "True"
}
```

### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```csharp
using System.Text.Json;

// –ó–∞–≥—Ä—É–∑–∫–∞ JSON
var json = File.ReadAllText("formulas.json");
var formulas = JsonSerializer.Deserialize<List<FormulaDescription>>(json);

// –ü–æ–∏—Å–∫ —Ñ–æ—Ä–º—É–ª—ã
var boolFormula = formulas.FirstOrDefault(f => f.Name == "BOOL");
Console.WriteLine($"{boolFormula.Name}: {boolFormula.Description}");

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É
var dateFormulas = formulas.Where(f => f.Result == "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è").ToList();
Console.WriteLine($"–ù–∞–π–¥–µ–Ω–æ —Ñ–æ—Ä–º—É–ª –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏: {dateFormulas.Count}");

// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
var grouped = formulas.GroupBy(f => f.Result);
foreach (var group in grouped)
{
    Console.WriteLine($"{group.Key}: {group.Count()} —Ñ–æ—Ä–º—É–ª");
}
```

### üìù –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–æ—Ä–º—É–ª

<details>
<summary>–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ 180 —Ñ–æ—Ä–º—É–ª (–∫–ª–∏–∫ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è)</summary>

#### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤
- BOOL, DATE, DECIMAL, DURATION, ID, INT, STRING

#### –°—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- CONCAT, FORMAT, INDEXOF, JOIN, LENGTH, MATCHES, NORMALIZE, NOTMATCHES
- REGEXREPLACE, REPLACE, TOLOWER, TOUPPER, TRIM, STARTSWITH, SUBSTRING

#### –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- CREATEDATE, CREATEDATEUTC, ADDDAYS, ADDHOURS, ADDMINUTES, ADDMONTHS
- ADDSECONDS, ADDYEARS, DAY, DAYOFWEEK, DAYOFYEAR, MONTH, YEAR
- ENDOFDAY, ENDOFMONTH, STARTOFDAY, STARTOFMONTH, –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

#### –†–∞–±–æ—Ç–∞ —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- ADDDUR, COMPARE, DAYS, HOURS, MINUTES, SECONDS, TOTALSECONDS

#### –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- EQUALS, BETWEEN, GREATER, GREATEROREQUAL, LESS, LESSOREQUAL
- AND, OR, NOT, IF, ISEMPTY, ISNOTEMPTY

#### –ß–∏—Å–ª–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ABS, CEILING, FLOOR, MAX, MIN, ROUND, SUM, AVG, COUNT

#### –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏
- LIST, FIRST, LAST, SORT, DISTINCT, FILTER, MAP, REDUCE

...–∏ –µ—â–µ 100+ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º—É–ª!

</details>

### üöÄ –ö–∞–∫ —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `FormulaDescription` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
2. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –ø–∞—Ä—Å–µ—Ä `FormulaXmlParser` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ XML
3. XML —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç 180 —Ç–∞–±–ª–∏—Ü, –∫–∞–∂–¥–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–¥–Ω—É —Ñ–æ—Ä–º—É–ª—É
4. –ü–∞—Ä—Å–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∞—Ä–≥—É–º–µ–Ω—Ç—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø—Ä–∏–º–µ—Ä
5. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

### üíª –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞

- `FormulaDescription.cs` - –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
- `FormulaXmlParser.cs` - –ø–∞—Ä—Å–µ—Ä XML
- `Program.cs` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `formulas.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø—Ä–∞–≤–∫–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º
2. **–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ IDE –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—É–ª
4. **–ü–æ–∏—Å–∫** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –Ω—É–∂–Ω–æ–π —Ñ–æ—Ä–º—É–ª—ã
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
